<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EACL 2026 Embedding Dashboard</title>
    <link rel="stylesheet" href="/static/styles.css" />
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
  </head>
  <body>
    <div class="app-layout">
      <aside class="sidebar left">
        <h1>EACL 2026 Embeddings</h1>

        <section class="panel">
          <h2>Projection</h2>
          <label>Method
            <select id="method-select">
              <option value="pca">PCA</option>
              <option value="tsne">t-SNE</option>
              <option value="umap">UMAP</option>
            </select>
          </label>

          <div id="params-pca" class="param-group">
            <label><input type="checkbox" id="pca-whiten" /> Whiten</label>
            <label>random_state <input type="number" id="pca-random-state" value="42" /></label>
          </div>

          <div id="params-tsne" class="param-group hidden">
            <label>perplexity <input type="number" id="tsne-perplexity" value="30" min="5" max="100" step="1" /></label>
            <label>learning_rate
              <input type="text" id="tsne-learning-rate" value="auto" />
            </label>
            <label>n_iter <input type="number" id="tsne-n-iter" value="1000" min="250" max="5000" step="50" /></label>
            <label>init
              <select id="tsne-init">
                <option value="pca">pca</option>
                <option value="random">random</option>
              </select>
            </label>
            <label>metric
              <select id="tsne-metric">
                <option value="cosine">cosine</option>
                <option value="euclidean">euclidean</option>
              </select>
            </label>
            <label>random_state <input type="number" id="tsne-random-state" value="42" /></label>
            <label>PCA pre-components
              <input type="number" id="tsne-pca-pre" value="50" min="2" step="1" />
            </label>
          </div>

          <div id="params-umap" class="param-group hidden">
            <label>n_neighbors <input type="number" id="umap-n-neighbors" value="15" min="5" max="200" step="1" /></label>
            <label>min_dist <input type="number" id="umap-min-dist" value="0.1" min="0" max="1" step="0.01" /></label>
            <label>metric
              <select id="umap-metric">
                <option value="cosine">cosine</option>
                <option value="euclidean">euclidean</option>
              </select>
            </label>
            <label>spread <input type="number" id="umap-spread" value="1.0" min="0.1" step="0.1" /></label>
            <label>random_state <input type="number" id="umap-random-state" value="42" /></label>
            <label>PCA pre-components
              <input type="number" id="umap-pca-pre" value="50" min="2" step="1" />
            </label>
          </div>
        </section>

        <section class="panel">
          <h2>View mode</h2>
          <label><input type="radio" name="mode" value="all" checked /> All data</label>
          <label><input type="radio" name="mode" value="session" /> Per session</label>
          <label><input type="checkbox" id="oral-only-toggle" /> Location shortcut: Oral only (in-person)</label>
          <label>Session
            <select id="session-select" disabled></select>
          </label>
        </section>

        <section class="panel">
          <h2>Search</h2>
          <label>Title search
            <input type="text" id="search-text" placeholder="Search in title (term1; term2; ...)" />
          </label>
          <label>Search mode
            <select id="search-mode">
              <option value="highlight">Highlight matches</option>
              <option value="filter">Filter to matches</option>
            </select>
          </label>
        </section>

        <section class="panel">
          <h2>Sampling</h2>
          <label><input type="checkbox" id="sample-enabled" /> Enable downsampling</label>
          <label>Max points <input type="number" id="sample-max-points" value="960" min="50" step="10" /></label>
          <label>Strategy
            <select id="sample-strategy">
              <option value="random">random</option>
              <option value="stratified_by_session">stratified_by_session</option>
            </select>
          </label>
        </section>

        <section class="panel">
          <div class="button-row">
            <button id="run-btn">Run projection</button>
            <button id="reset-filters-btn" class="secondary">Reset filters</button>
          </div>
          <div class="button-row">
            <button id="share-link-btn" class="secondary">Share link</button>
            <button id="export-projection-btn" class="secondary">Export projection CSV</button>
          </div>
          <div id="status-line">Ready</div>
          <div id="stats-line"></div>
        </section>

        <section class="panel" id="filters-panel">
          <h2>Filters</h2>
          <div id="filters-container"></div>
        </section>
      </aside>

      <main class="main-panel">
        <div id="plot"></div>
        <section class="panel selection-panel">
          <div class="selection-header">
            <h2>Selected papers</h2>
            <button id="export-selected-btn" class="secondary">Export selected IDs CSV</button>
          </div>
          <table id="selection-table">
            <thead>
              <tr>
                <th data-sort="rank">rank</th>
                <th data-sort="paper_id">paper_id</th>
                <th data-sort="title">title</th>
                <th data-sort="session">session</th>
                <th data-sort="room_location">room</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </section>
      </main>

      <aside class="sidebar right">
        <section class="panel">
          <h2>Paper details</h2>
          <div id="details-empty">Click a point to inspect details.</div>
          <div id="details-content" class="hidden">
            <div><strong>Title:</strong> <span id="detail-title"></span></div>
            <div><strong>paper_id:</strong> <span id="detail-paper-id"></span></div>
            <div><strong>Session:</strong> <span id="detail-session"></span></div>
            <div><strong>Room Location:</strong> <span id="detail-room"></span></div>
            <div><strong>Type of Presentation:</strong> <span id="detail-type"></span></div>
            <div><strong>Attendance Type:</strong> <span id="detail-attendance"></span></div>
          </div>
        </section>

        <section class="panel">
          <h2>Nearest neighbors</h2>
          <label>k
            <input type="number" id="nn-k" min="1" max="50" value="10" />
          </label>
          <button id="nn-refresh-btn" class="secondary">Refresh neighbors</button>
          <table id="nn-table">
            <thead>
              <tr>
                <th>rank</th>
                <th>paper_id</th>
                <th>title</th>
                <th>cosine</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </section>
      </aside>
    </div>

    <script src="/static/app.js"></script>
  </body>
</html>
